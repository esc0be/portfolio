/* Smoother glitch header */
.ascii-header {
  animation: glitch-header 12s ease-in-out infinite;
  will-change: transform, opacity;
}

.ascii-header::before {
  animation:
    rgb-split-before 8s ease-in-out infinite alternate,
    glitch-shift-before 6s ease-in-out infinite;
  opacity: 0.7;
  text-shadow:
    -1.2px 0 var(--glitch-red),
     1.2px 0 var(--glitch-cyan),
    -0.6px 0.6px var(--glitch-magenta);
}

.ascii-header::after {
  animation:
    rgb-split-after 9s ease-in-out infinite alternate-reverse,
    glitch-shift-after 7s ease-in-out infinite;
  opacity: 0.65;
  text-shadow:
     1.2px 0 var(--glitch-cyan),
    -1.2px 0 var(--glitch-red),
     0.6px -0.6px #ffff00;
}

.ascii-header.crt-glitch-intensify {
  animation-duration: 4.2s; /* faster when CRT on */
}
.ascii-header.crt-glitch-intensify::before,
.ascii-header.crt-glitch-intensify::after {
  animation-duration: 2.1s, 2.4s; /* quicker RGB chaos */
}

.glitch-burst {
  animation: glitch-burst 0.6s steps(5);
}

@keyframes glitch-burst {
  0%   { transform: translate(0); opacity: 1; }
  20%  { transform: translate(-3px, 3px) skew(5deg); opacity: 0.7; }
  40%  { transform: translate(4px, -4px) skew(-8deg); opacity: 0.85; }
  60%  { transform: translate(-2px, 2px); opacity: 0.6; }
  80%  { transform: translate(2px, -2px); opacity: 0.9; }
  100% { transform: translate(0); opacity: 1; }
}

/* ── Keyframes ────────────────────────────────────────────── */

@keyframes glitch-header {
  0%, 100% { transform: translate(0); opacity: 1; }
  25%      { transform: translate(0.6px, -0.6px); opacity: 0.97; }
  50%      { transform: translate(-0.8px, 0.8px); opacity: 0.96; }
  75%      { transform: translate(0.4px, -0.4px); opacity: 0.98; }
}

@keyframes rgb-split-before {
  0%   { transform: translate(-0.8px, 0.5px); }
  100% { transform: translate(0.8px, -0.5px); }
}

@keyframes rgb-split-after {
  0%   { transform: translate(0.7px, -0.4px); }
  100% { transform: translate(-0.7px, 0.4px); }
}

/* Separate rules — no comma! */
@keyframes glitch-shift-before {
  0%, 100% { clip-path: inset(0 0 0 0); }
  20%, 80% { clip-path: inset(0.5% 0 0.8% 0); }
  40%, 60% { clip-path: inset(0.3% 0.4% 0.7% 0.2%); }
}

@keyframes glitch-shift-after {
  0%, 100% { clip-path: inset(0 0 0 0); }
  20%, 80% { clip-path: inset(0.5% 0 0.8% 0); }
  40%, 60% { clip-path: inset(0.3% 0.4% 0.7% 0.2%); }
}